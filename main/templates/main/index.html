{% extends 'main/base.html' %}
{% load leaflet_tags %}
{% load static %}

{% block hero-pre %}
<div class="shadow-sm">
    <div id="particles-js">
        {% endblock %}
        {% block hero %}
        <div class="container-fluid container-hero">
            <div class="row row-hero">
                <div class="col-sm-12 col-md-10 offset-md-1 my-5">
                    <h1 class="di-title mb-4">A crowdsourced redistricting tool to map communities and make your voice heard.</h1>
                    <a class="btn btn-primary btn-canvas" href="#features" role="button">Tutorial</a>
                    <a class="btn btn-primary btn-canvas" href="/entry" role="button">Contribute</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block head %}
{% leaflet_js %}
{% leaflet_css %}

<!--  Mapbox GL JS-->
<meta charset='utf-8' />
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.54.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.54.0/mapbox-gl.css' rel='stylesheet' />
{% endblock %}

{% block content %}
<!--  what is Districter ?? -->
<div class="row row-content">
    <div id='descriptionTop' class = "col-4">
        <h2 class="text-primary">What is Districter?</h2>
        <br>
        <p>Districter is an online service that allows Americans to fight against gerrymandering by
            drawing their communities of interest (COIs) on a map. A COI is what a person consider to
            be their community.<br> <br>

            This can take the form of a coastal neighborhood that stretches along a
            beach, or a valley village that is clustered around a river. Currently, people can only provide
            qualitative information through committee hearings, which cannot be easily used to draw
            districts or highlight gerrymandering.<br> <br>

            Allowing people to mark their COIs will help redistricting
            committees by providing them with quantifiable information that can be used to draw fair
            districts. Furthermore, Districter will provide a way to better visualize and quantify the current
            state of gerrymandering by overlaying district lines over communities of interest.</p>
    </div>
    <div id='map' class='draw_polygon_map col-8'>
    </div>

</div>

<div class="row row-content">
  <div class = 'col-sm-12'>
        <h2 class="text-primary">How Do I contribute?</h2>
  </div>
</div>
<!--  TUTORIAL -------------------------------------------------------------->
<div class="row row-content">
    <div class='col-sm'>
        <div id='features'>
            <!--  STEP ONE : BROWSE THE MAP-->
                    <section id='Step1-Browse' class='active'>
                        <h3> 1. Browse the Map </h3>
                        <div class="row">
                              <div id=images class="col-sm-6">
                                  <img src="{% static 'img/browse1.png' %}" alt="map" style="width: 100%; height: 100%;">
                                  <!--   <img src="{% static 'img/demo.png' %}" alt="demo" width=600px height=300px> -->
                            </div>
                            <div id=description class="col-sm-6">
                                <p> Explore the map by entering in a zipcode in the search box and navigate to your
                                    local community using interactive features. </p>
                            </div>
                        </div>
                    </section>


            <!--  STEP TWO :NavCommunity -->
                    <section id='Step2-NavCommunity' class='active'>
                        <h3> 2. Orient yourself, get ready to draw! </h3>
                        <div class="row">
                            <div id=description class="col-sm-6">
                                <p> Using a variety of geographic and census features, get
                                    a better understanding for your geospatial COI; click on the upper right hand 'Dr
                                    aw Polygon' tool when you're ready to draw your COI</p>
                            </div>
                              <div id=images class="col-sm-6">
                                  <img src="{% static 'img/startCOI.png' %}" alt="map" style="width: 100%; height: 100%;">
                                  <!--   <img src="{% static 'img/demo.png' %}" alt="demo" width=600px height=300px> -->
                            </div>
                        </div>
                    </section>

            <!--  STEP THREE : DRAW COI -->
                    <section id='Step3-drawCOi' class='active'>
                        <h3> 3. Draw your COI </h3>
                        <div class="row">
                              <div id=images class="col-sm-6">
                                  <img src="{% static 'img/COI2:3.png' %}" alt="map" style="width: 100%; height: 100%;">
                                  <!--   <img src="{% static 'img/demo.png' %}" alt="demo" width=600px height=300px> -->
                            </div>
                            <div id=description class="col-sm-6">
                                <p> After clicking the 'Draw Polygon' tool, click on a point on the map to create
                                    a vertex to start your polygon.
                                    Click down to place a vertex then drag the cursor to your next desired COI boundary point.
                                    Click twice on your final vertex to
                                    finalize your polygon. </p>
                            </div>
                        </div>
                    </section>

            <!--  STEP THREE : DRAW COI -->
                    <section id='Step3-drawCOi' class='active'>
                        <h3> 4. Finalize and/or edit your COI </h3>
                        <div class="row">
                            <div id=description class="col-sm-6">
                                <p> Once a polygon is finalized the shape will snap to the census block units that
                                  correspond with your submitted COI.
                                  To start over press the trash can on the right hand of the screen. To edit the
                                polygon once made simply double click on a vertex and drag accordingly or
                                even drag the entire shape over. </p>
                            </div>
                            <div id=images class="col-sm-6">
                                <img src="{% static 'img/COIdraw2.png' %}" alt="map" style="width: 100%; height: 100%;">
                                <!--   <img src="{% static 'img/demo.png' %}" alt="demo" width=600px height=300px> -->
                            </div>
                        </div>
                    </section>


            <!--  STEP FOUR : Enter DEMOGRAPHIC data -->
                    <section id='Step4-DemographicData' class='active'>
                        <h3> 5.Demographic Data </h3>
                        <div class="row">
                          <div id=images class="col-sm-6">
                              <img src="{% static 'img/demographics.png' %}" alt="map" style="width: 100%; height: 100%;">
                              <!--   <img src="{% static 'img/demo.png' %}" alt="demo" width=600px height=300px> -->
                          </div>
                            <div id=description class="col-sm-6">
                                <p> Help us understand the importance of this community for you, and
                                    identify aggregate trends in your commynity
                                    by submitting your demographic information on the left
                                    hand side of the screen </p>
                            </div>
                        </div>
                    </section>

            <!--  STEP FIVE : submit  -->
                    <section id='Step5-Submit Data' class='active'>
                        <h3> 5.Topics and Issues of Interest </h3>
                        <div class="row">
                            <div id=description class="col-sm-6">
                                <p> Submit issues so that your voice can be heard about the issues you feel pertain to your
                                  community! Pick the category your issue/ topic of interest falls into then further specify in
                                  with the field.
                            </div>
                            <div id=images class="col-sm-6">
                                <img src="{% static 'img/issues.png' %}" alt="map" style="width: 100%; height: 100%;">
                                <!--   <img src="{% static 'img/demo.png' %}" alt="demo" width=600px height=300px> -->
                            </div>
                        </div>
                    </section>

                    <section id='Step6-Submit Data' class='active'>
                        <h3> 6.Submit & have your voice heard! </h3>
                        <div class="row">
                          <div id=images class="col-sm-6">
                              <img src="{% static 'img/mapp.png' %}" alt="map" style="width: 100%; height: 100%;">
                              <!--   <img src="{% static 'img/demo.png' %}" alt="demo" width=600px height=300px> -->
                          </div>
                            <div id=description class="col-sm-6">
                                <p> Submit your data to be entered into a critical databse of citizens in your area
                                    who want to have their voices heard during redistricting and other political processes
                                    involving your community!
                            </div>
                        </div>
                    </section>

                <div class="col-sm-12 col-md-10 offset-md-1 my-5 text-center">
                    <a class="btn btn-primary" href="#descriptionTop" role="button">Back to Top</a>
                    <a class="btn btn-primary" href="/entry" role="button">Contribute Now!</a>
                </div>

        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<script src="{% static 'js/particles.min.js' %}"></script>
<script>
    particlesJS.load('particles-js', "{% static 'assets/particles.json' %}", function() {
        console.log('callback - particles.min.js config loaded');
    });
</script>
<script type="text/javascript">
    mapboxgl.accessToken = "{{ mapbox_key }}";

    var map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/dark-v10',
      center: [-120, 50],
      zoom: 1
    });

    map.on('load', function() {
    // Add a geojson point source.
    // Heatmap layers also work with a vector tile source.
    map.addSource('earthquakes', {
    "type": "geojson",
    "data": "https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson"
    });

map.addLayer({
"id": "earthquakes-heat",
"type": "heatmap",
"source": "earthquakes",
"maxzoom": 9,
"paint": {
// Increase the heatmap weight based on frequency and property magnitude
"heatmap-weight": [
"interpolate",
["linear"],
["get", "mag"],
0, 0,
6, 1
],
// Increase the heatmap color weight weight by zoom level
// heatmap-intensity is a multiplier on top of heatmap-weight
"heatmap-intensity": [
"interpolate",
["linear"],
["zoom"],
0, 1,
9, 3
],
// Color ramp for heatmap.  Domain is 0 (low) to 1 (high).
// Begin color ramp at 0-stop with a 0-transparancy color
// to create a blur-like effect.
"heatmap-color": [
"interpolate",
["linear"],
["heatmap-density"],
0, "rgba(33,102,172,0)",
0.2, "rgb(103,169,207)",
0.4, "rgb(209,229,240)",
0.6, "rgb(253,219,199)",
0.8, "rgb(239,138,98)",
1, "rgb(178,24,43)"
],
// Adjust the heatmap radius by zoom level
"heatmap-radius": [
"interpolate",
["linear"],
["zoom"],
0, 2,
9, 20
],
// Transition from heatmap to circle layer by zoom level
"heatmap-opacity": [
"interpolate",
["linear"],
["zoom"],
7, 1,
9, 0
],
}
}, 'waterway-label');

map.addLayer({
"id": "earthquakes-point",
"type": "circle",
"source": "earthquakes",
"minzoom": 7,
"paint": {
// Size circle radius by earthquake magnitude and zoom level
"circle-radius": [
"interpolate",
["linear"],
["zoom"],
7, [
"interpolate",
["linear"],
["get", "mag"],
1, 1,
6, 4
],
16, [
"interpolate",
["linear"],
["get", "mag"],
1, 5,
6, 50
]
],
// Color circle by earthquake magnitude
"circle-color": [
"interpolate",
["linear"],
["get", "mag"],
1, "rgba(33,102,172,0)",
2, "rgb(103,169,207)",
3, "rgb(209,229,240)",
4, "rgb(253,219,199)",
5, "rgb(239,138,98)",
6, "rgb(178,24,43)"
],
"circle-stroke-color": "white",
"circle-stroke-width": 1,
// Transition from heatmap to circle layer by zoom level
"circle-opacity": [
"interpolate",
["linear"],
["zoom"],
7, 0,
8, 1
]
}
}, 'waterway-label');
});
</script>
{% endblock %}
