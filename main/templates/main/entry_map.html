{% load i18n %}
{% load widget_tweaks %}

<div class="row row-equal-cols">
    <!-- Map -->
    <div class="col-lg m-2">
        <div class="collapse-card card-section">
            <div class="card">
                <div class="card-header text-header-card">
                    <strong>
                    {% trans "4. Draw Your Community" %}
                    </strong>
                </div>
                <div id='map-card' class="card-body">
                    <!-- {# Include form.entry_polygon error. } -->
                        <div id="map-error-alerts">
                            {% if comm_form.user_polygon.errors %}
                            <script>
                                sessionStorage.setItem("allChecks", "fail");
                            </script>
                            <div id="polygon_missing" class="alert alert-danger django-alert alert-dismissible fade show form-error" role="alert">
                                {% trans "You need to draw a community to submit the form." %}
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            {% endif %}
                        </div>
                        <strong>
                                {% trans "Search for a location, such as address, city, or zipcode to begin drawing your community." %}
                                <small class="text-danger">{% trans "(Required)" %}</small>
                        </strong>
                        <span class="float-right my-2">
                            <button class="btn btn-secondary btn-sm mb-2 mr-2 d-none" id="shepherd-btn" onclick="myTour.start()" type="button">{% trans "Step-by-step guide" %}</button>
                            <button class="btn btn-secondary btn-sm mb-2" onclick="showVideoPopup()" type="button">{% trans "Video Tutorial" %}</button>
                        </span>
                        <div id="geocoder" class="geocoder my-3"></div>
                        <div class="map-bounding-box my-2 collapse">
                            <p>{% blocktrans %} Draw your community by selecting <a href="https://www.census.gov/programs-surveys/geography/about/glossary.html#par_textimage_4" target="_blank" data-toggle="tooltip" title="The units you are selecting to draw your community are census block groups. Map drawers use these units when creating districts.">units</a> on the map.
                                Make sure that all your community is contained within the highlighted units, and that your drawn community does not contain gaps.
                                {% endblocktrans %}
                            </p>
                            <div class="map-box">
                                <div id='menu'></div>
                                <div id='map' class='draw_polygon_map' onload="map.resize()">
                                    <div id="warning-box-id" class="map-popup-box warning-box">
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
        </div>
    </div>
</div>