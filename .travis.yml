# https://medium.com/@MicroPyramid/set-up-travis-ci-for-django-project-427d6dd2f46c
dist:           xenial   # required for Python >= 3.7
language:       python
python:
  - "3.7"
# Start PostgreSQL
services:
    - postgresql
# Specify Django version and the database
env:
    - DJANGO=2.2 DB=postgres
# Install the version of PostGIS that matches your PostgreSQL version,
# and activate the PostGIS extension using:
addons:
  postgresql: "11.2"
  apt:
    packages:
    - postgresql-11-postgis-2.5
# Run before script.
before_script:
    - psql -c 'create database travis_ci_test;' -U postgres
    - psql -U postgres -c "create extension postgis;"
# command to install dependencies
install:
  - pip install -r requirements.txt
# command to run tests
script:
  - python manage.py test
notifications:
  email:
    recipients:
      - marcu.theodor@gmail.com
    on_success: never
    on_failure: always
